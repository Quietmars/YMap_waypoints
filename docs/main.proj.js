"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkreact_project"] = self["webpackChunkreact_project"] || []).push([[179],{

/***/ "E3jb4rnO":
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

eval("\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(\"b3LDTz+H\");\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tIBJhx\");\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(\"i8i4LrFt\");\n// EXTERNAL MODULE: ./node_modules/react-dom/client.js\nvar client = __webpack_require__(\"EbEgzozK\");\n;// CONCATENATED MODULE: ./src/store/index.js\n\nvar initialState = {\n  pointsCollection: null,\n  polyline: null,\n  map: null\n};\nvar ctx = /*#__PURE__*/react.createContext(null);\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(\"zThLd8G0\");\n;// CONCATENATED MODULE: ./src/components/input/index.js\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0,defineProperty/* default */.Z)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n\n\n\nvar Input = function Input() {\n  var _useContext = (0,react.useContext)(ctx),\n      store = _useContext.store,\n      updStore = _useContext.updStore;\n\n  var _useState = (0,react.useState)(''),\n      _useState2 = (0,slicedToArray/* default */.Z)(_useState, 2),\n      inputValue = _useState2[0],\n      setInputValue = _useState2[1];\n\n  var setValue = function setValue(e) {\n    e.preventDefault();\n    setInputValue(e.target.value);\n  };\n\n  var addNewPoint = function addNewPoint(e) {\n    if (e.key === \"Enter\") {\n      var newPoint = new ymaps.GeoObject({\n        geometry: {\n          type: \"Point\",\n          coordinates: store.map.getCenter()\n        },\n        properties: {\n          id: \"id\".concat(new Date().getTime()),\n          balloonContent: inputValue\n        }\n      }, {});\n      updStore(_objectSpread(_objectSpread({}, store), store.pointsCollection.add(newPoint)));\n      setInputValue('');\n    }\n  };\n\n  return /*#__PURE__*/react.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return setValue(e);\n    },\n    onKeyPress: function onKeyPress(e) {\n      return addNewPoint(e);\n    },\n    className: \"input-title\",\n    placeholder: \"\\u041D\\u043E\\u0432\\u0430\\u044F \\u0442\\u043E\\u0447\\u043A\\u0430 \\u043C\\u0430\\u0440\\u0448\\u0440\\u0443\\u0442\\u0430\",\n    value: inputValue\n  });\n};\n;// CONCATENATED MODULE: ./src/components/button/index.js\n\n\nvar Button = function Button(_ref) {\n  var handleDeletePoint = _ref.handleDeletePoint;\n  return /*#__PURE__*/react.createElement(\"button\", {\n    onClick: handleDeletePoint,\n    className: \"button button_delete\"\n  });\n};\n;// CONCATENATED MODULE: ./src/components/pointsItem/index.js\n\n\n\nfunction pointsItem_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction pointsItem_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? pointsItem_ownKeys(Object(source), !0).forEach(function (key) { (0,defineProperty/* default */.Z)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : pointsItem_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n\n\n\nvar PointsItem = function PointsItem(_ref) {\n  var title = _ref.title,\n      index = _ref.index,\n      handleDeletePoint = _ref.handleDeletePoint,\n      handleChangePointPosition = _ref.handleChangePointPosition;\n\n  var _useState = (0,react.useState)({\n    isVisible: true,\n    isHovered: false\n  }),\n      _useState2 = (0,slicedToArray/* default */.Z)(_useState, 2),\n      pointState = _useState2[0],\n      setPointState = _useState2[1];\n\n  var hideClass = !pointState.isVisible ? 'point_hide' : '';\n  var hoverClass = pointState.isHovered ? 'point_hovered' : ''; //скрыть переносимый элемент при начале переноса\n\n  var handleDragStart = function handleDragStart(e) {\n    var currentIndex = index; //индекс переносиномого элемента\n\n    setTimeout(function () {\n      setPointState(pointsItem_objectSpread(pointsItem_objectSpread({}, pointState), {\n        isVisible: false\n      }));\n    }, 0);\n    e.dataTransfer.setData('currentIndex', currentIndex);\n  }; //показать переносимый элемент\n\n\n  var handleDragEnd = function handleDragEnd(e) {\n    return setPointState(pointsItem_objectSpread(pointsItem_objectSpread({}, pointState), {\n      isVisible: true\n    }));\n  }; //выделить целевой элемент при наведении\n\n\n  var handleDragOver = function handleDragOver(e) {\n    e.preventDefault();\n    if (!pointState.isHovered) setPointState(pointsItem_objectSpread(pointsItem_objectSpread({}, pointState), {\n      isHovered: true\n    }));\n  }; //убрать выделение с целевого элемента\n\n\n  var handleDragLeave = function handleDragLeave(e) {\n    return setPointState(pointsItem_objectSpread(pointsItem_objectSpread({}, pointState), {\n      isHovered: false\n    }));\n  }; //Завершение переноса, отпустили кнопку мыши\n\n\n  var handleDrop = function handleDrop(e) {\n    var targetIndex = index; //индекс целевого элемента (значение index зависит от вызваного события)\n\n    var currentIndex = e.dataTransfer.getData('currentIndex');\n    setPointState(pointsItem_objectSpread(pointsItem_objectSpread({}, pointState), {\n      isHovered: false\n    }));\n    handleChangePointPosition(currentIndex, targetIndex);\n  }; //const handleDragEnter = (e) => setPointState({ ...pointState, ...{ isHovered: true } })\n\n\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"point-wrap\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    onDragStart: handleDragStart,\n    onDragEnd: handleDragEnd,\n    onDragOver: handleDragOver //onDragEnter={handleDragEnter}\n    ,\n    onDragLeave: handleDragLeave,\n    onDrop: handleDrop,\n    className: \"point \".concat(hoverClass, \" \").concat(hideClass),\n    draggable: \"true\"\n  }, /*#__PURE__*/react.createElement(\"div\", null, title), /*#__PURE__*/react.createElement(Button, {\n    handleDeletePoint: handleDeletePoint\n  })));\n};\n;// CONCATENATED MODULE: ./src/components/points/index.js\n\n\nfunction points_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction points_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? points_ownKeys(Object(source), !0).forEach(function (key) { (0,defineProperty/* default */.Z)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : points_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n\n\n\n\nvar Points = function Points() {\n  var _useContext = (0,react.useContext)(ctx),\n      store = _useContext.store,\n      updStore = _useContext.updStore;\n\n  var _handleDeletePoint = function handleDeletePoint(point) {\n    updStore(points_objectSpread(points_objectSpread({}, store), {\n      pointsCollection: store.pointsCollection.remove(point)\n    }));\n  };\n\n  var handleChangePointPosition = function handleChangePointPosition(currentIndex, targetIndex) {\n    var currentPoint = store.pointsCollection.get(currentIndex);\n    updStore(points_objectSpread(points_objectSpread(points_objectSpread({}, store), store.pointsCollection.remove(currentPoint)), store.pointsCollection.splice(targetIndex, 0, currentPoint)));\n  };\n\n  var renderPointsList = function renderPointsList(pointsCollection) {\n    if (pointsCollection) {\n      return pointsCollection.toArray().map(function (point, i) {\n        return /*#__PURE__*/react.createElement(PointsItem, {\n          index: i,\n          key: point.properties.get('id'),\n          title: point.properties.get('balloonContent'),\n          handleDeletePoint: function handleDeletePoint() {\n            return _handleDeletePoint(point);\n          },\n          handleChangePointPosition: handleChangePointPosition\n        });\n      });\n    }\n\n    return /*#__PURE__*/react.createElement(react.Fragment, null);\n  };\n\n  return renderPointsList(store.pointsCollection);\n};\n;// CONCATENATED MODULE: ./src/components/map/index.js\n\n\nfunction map_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction map_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? map_ownKeys(Object(source), !0).forEach(function (key) { (0,defineProperty/* default */.Z)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : map_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n\n\n\nvar Map = function Map() {\n  var _useContext = (0,react.useContext)(ctx),\n      store = _useContext.store,\n      updStore = _useContext.updStore;\n\n  var initMap = function initMap() {\n    return new ymaps.Map(\"map\", {\n      center: [55.76, 37.64],\n      zoom: 7\n    });\n  };\n\n  var createPolyline = function createPolyline() {\n    return new ymaps.GeoObject({\n      geometry: {\n        type: \"LineString\",\n        coordinates: []\n      }\n    }, {\n      strokeWidth: 4\n    });\n  };\n\n  var transformPolyline = function transformPolyline(e) {\n    if (store.pointsCollection) {\n      var coordinates = store.pointsCollection.toArray().map(function (point) {\n        return point.geometry.getCoordinates();\n      });\n      store.polyline.geometry.setCoordinates(coordinates);\n    }\n  };\n\n  var createPointsCollection = function createPointsCollection() {\n    return new ymaps.GeoObjectCollection({}, {\n      preset: 'islands#redIcon',\n      draggable: true\n    });\n  };\n\n  (0,react.useEffect)(function () {\n    ymaps.ready(function () {\n      if (!store.map) {\n        var map = initMap();\n        var pointsCollection = createPointsCollection();\n        var polyline = createPolyline();\n        map.geoObjects.add(pointsCollection);\n        map.geoObjects.add(polyline);\n        updStore(map_objectSpread(map_objectSpread({}, store), {\n          map: map,\n          polyline: polyline,\n          pointsCollection: pointsCollection\n        }));\n      }\n    });\n\n    if (store.pointsCollection) {\n      var transformPolylineEvent = function transformPolylineEvent(e) {\n        return transformPolyline(e);\n      };\n\n      store.pointsCollection.events.add('add', transformPolylineEvent);\n      store.pointsCollection.events.add('geometrychange', transformPolylineEvent);\n      store.pointsCollection.events.add('remove', transformPolylineEvent); //store.pointsCollection.events.add('set', transformPolylineEvent)\n      //store.pointsCollection.events.add('dragend', transformPolylineEvent)\n\n      return function () {\n        store.pointsCollection.events.remove('add', transformPolylineEvent);\n        store.pointsCollection.events.remove('geometrychange', transformPolylineEvent);\n        store.pointsCollection.events.remove('remove', transformPolylineEvent);\n      };\n    }\n  }, [store]);\n  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement(\"div\", {\n    id: \"map\",\n    className: \"map\"\n  }));\n};\n;// CONCATENATED MODULE: ./src/pages/index/index.js\n\n\n\n\n\nvar IndexPage = function IndexPage() {\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"content\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"content__input\"\n  }, /*#__PURE__*/react.createElement(Input, null), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"content__points\"\n  }, /*#__PURE__*/react.createElement(Points, null))), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"content__map\"\n  }, /*#__PURE__*/react.createElement(Map, null)));\n};\n;// CONCATENATED MODULE: ./src/index.js\n\n\n\n\n\n\n\n\n/* console.log(process.env.SUB_FOLDER) */\n\n/* console.log(process.env.BACKEND_HOST) */\n\nvar App = function App() {\n  var _useState = (0,react.useState)(initialState),\n      _useState2 = (0,slicedToArray/* default */.Z)(_useState, 2),\n      store = _useState2[0],\n      updStore = _useState2[1];\n\n  return /*#__PURE__*/react.createElement(ctx.Provider, {\n    value: {\n      store: store,\n      updStore: updStore\n    }\n  }, /*#__PURE__*/react.createElement(IndexPage, null));\n};\n\nvar root = (0,client/* createRoot */.s)(document.getElementById(\"app\"));\nroot.render( /*#__PURE__*/react.createElement(App, null));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRTNqYjRybk8uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWFjdF9wcm9qZWN0Ly4vc3JjL3N0b3JlL2luZGV4LmpzPzIyYmUiLCJ3ZWJwYWNrOi8vcmVhY3RfcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL2lucHV0L2luZGV4LmpzP2QxNWMiLCJ3ZWJwYWNrOi8vcmVhY3RfcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL2J1dHRvbi9pbmRleC5qcz9lZWY3Iiwid2VicGFjazovL3JlYWN0X3Byb2plY3QvLi9zcmMvY29tcG9uZW50cy9wb2ludHNJdGVtL2luZGV4LmpzPzczMjgiLCJ3ZWJwYWNrOi8vcmVhY3RfcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL3BvaW50cy9pbmRleC5qcz8xNGI1Iiwid2VicGFjazovL3JlYWN0X3Byb2plY3QvLi9zcmMvY29tcG9uZW50cy9tYXAvaW5kZXguanM/Yzk3ZiIsIndlYnBhY2s6Ly9yZWFjdF9wcm9qZWN0Ly4vc3JjL3BhZ2VzL2luZGV4L2luZGV4LmpzPzk0OTMiLCJ3ZWJwYWNrOi8vcmVhY3RfcHJvamVjdC8uL3NyYy9pbmRleC5qcz8yZGVjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmV4cG9ydCB2YXIgaW5pdGlhbFN0YXRlID0ge1xuICBwb2ludHNDb2xsZWN0aW9uOiBudWxsLFxuICBwb2x5bGluZTogbnVsbCxcbiAgbWFwOiBudWxsXG59O1xuZXhwb3J0IHZhciBjdHggPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlQ29udGV4dChudWxsKTsiLCJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2xpY2VkVG9BcnJheVwiO1xuXG5mdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KSksIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTsgaSAlIDIgPyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKSA6IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUNvbnRleHQgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IGN0eCB9IGZyb20gXCIuLi8uLi9zdG9yZVwiO1xuZXhwb3J0IHZhciBJbnB1dCA9IGZ1bmN0aW9uIElucHV0KCkge1xuICB2YXIgX3VzZUNvbnRleHQgPSB1c2VDb250ZXh0KGN0eCksXG4gICAgICBzdG9yZSA9IF91c2VDb250ZXh0LnN0b3JlLFxuICAgICAgdXBkU3RvcmUgPSBfdXNlQ29udGV4dC51cGRTdG9yZTtcblxuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoJycpLFxuICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgICBpbnB1dFZhbHVlID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldElucHV0VmFsdWUgPSBfdXNlU3RhdGUyWzFdO1xuXG4gIHZhciBzZXRWYWx1ZSA9IGZ1bmN0aW9uIHNldFZhbHVlKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgc2V0SW5wdXRWYWx1ZShlLnRhcmdldC52YWx1ZSk7XG4gIH07XG5cbiAgdmFyIGFkZE5ld1BvaW50ID0gZnVuY3Rpb24gYWRkTmV3UG9pbnQoZSkge1xuICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICB2YXIgbmV3UG9pbnQgPSBuZXcgeW1hcHMuR2VvT2JqZWN0KHtcbiAgICAgICAgZ2VvbWV0cnk6IHtcbiAgICAgICAgICB0eXBlOiBcIlBvaW50XCIsXG4gICAgICAgICAgY29vcmRpbmF0ZXM6IHN0b3JlLm1hcC5nZXRDZW50ZXIoKVxuICAgICAgICB9LFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgaWQ6IFwiaWRcIi5jb25jYXQobmV3IERhdGUoKS5nZXRUaW1lKCkpLFxuICAgICAgICAgIGJhbGxvb25Db250ZW50OiBpbnB1dFZhbHVlXG4gICAgICAgIH1cbiAgICAgIH0sIHt9KTtcbiAgICAgIHVwZFN0b3JlKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RvcmUpLCBzdG9yZS5wb2ludHNDb2xsZWN0aW9uLmFkZChuZXdQb2ludCkpKTtcbiAgICAgIHNldElucHV0VmFsdWUoJycpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgIHJldHVybiBzZXRWYWx1ZShlKTtcbiAgICB9LFxuICAgIG9uS2V5UHJlc3M6IGZ1bmN0aW9uIG9uS2V5UHJlc3MoZSkge1xuICAgICAgcmV0dXJuIGFkZE5ld1BvaW50KGUpO1xuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBcImlucHV0LXRpdGxlXCIsXG4gICAgcGxhY2Vob2xkZXI6IFwiXFx1MDQxRFxcdTA0M0VcXHUwNDMyXFx1MDQzMFxcdTA0NEYgXFx1MDQ0MlxcdTA0M0VcXHUwNDQ3XFx1MDQzQVxcdTA0MzAgXFx1MDQzQ1xcdTA0MzBcXHUwNDQwXFx1MDQ0OFxcdTA0NDBcXHUwNDQzXFx1MDQ0MlxcdTA0MzBcIixcbiAgICB2YWx1ZTogaW5wdXRWYWx1ZVxuICB9KTtcbn07IiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuZXhwb3J0IHZhciBCdXR0b24gPSBmdW5jdGlvbiBCdXR0b24oX3JlZikge1xuICB2YXIgaGFuZGxlRGVsZXRlUG9pbnQgPSBfcmVmLmhhbmRsZURlbGV0ZVBvaW50O1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgIG9uQ2xpY2s6IGhhbmRsZURlbGV0ZVBvaW50LFxuICAgIGNsYXNzTmFtZTogXCJidXR0b24gYnV0dG9uX2RlbGV0ZVwiXG4gIH0pO1xufTsiLCJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2xpY2VkVG9BcnJheVwiO1xuXG5mdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KSksIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTsgaSAlIDIgPyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKSA6IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL2J1dHRvblwiO1xuZXhwb3J0IHZhciBQb2ludHNJdGVtID0gZnVuY3Rpb24gUG9pbnRzSXRlbShfcmVmKSB7XG4gIHZhciB0aXRsZSA9IF9yZWYudGl0bGUsXG4gICAgICBpbmRleCA9IF9yZWYuaW5kZXgsXG4gICAgICBoYW5kbGVEZWxldGVQb2ludCA9IF9yZWYuaGFuZGxlRGVsZXRlUG9pbnQsXG4gICAgICBoYW5kbGVDaGFuZ2VQb2ludFBvc2l0aW9uID0gX3JlZi5oYW5kbGVDaGFuZ2VQb2ludFBvc2l0aW9uO1xuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZSh7XG4gICAgaXNWaXNpYmxlOiB0cnVlLFxuICAgIGlzSG92ZXJlZDogZmFsc2VcbiAgfSksXG4gICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIHBvaW50U3RhdGUgPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0UG9pbnRTdGF0ZSA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdmFyIGhpZGVDbGFzcyA9ICFwb2ludFN0YXRlLmlzVmlzaWJsZSA/ICdwb2ludF9oaWRlJyA6ICcnO1xuICB2YXIgaG92ZXJDbGFzcyA9IHBvaW50U3RhdGUuaXNIb3ZlcmVkID8gJ3BvaW50X2hvdmVyZWQnIDogJyc7IC8v0YHQutGA0YvRgtGMINC/0LXRgNC10L3QvtGB0LjQvNGL0Lkg0Y3Qu9C10LzQtdC90YIg0L/RgNC4INC90LDRh9Cw0LvQtSDQv9C10YDQtdC90L7RgdCwXG5cbiAgdmFyIGhhbmRsZURyYWdTdGFydCA9IGZ1bmN0aW9uIGhhbmRsZURyYWdTdGFydChlKSB7XG4gICAgdmFyIGN1cnJlbnRJbmRleCA9IGluZGV4OyAvL9C40L3QtNC10LrRgSDQv9C10YDQtdC90L7RgdC40L3QvtC80L7Qs9C+INGN0LvQtdC80LXQvdGC0LBcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgc2V0UG9pbnRTdGF0ZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHBvaW50U3RhdGUpLCB7XG4gICAgICAgIGlzVmlzaWJsZTogZmFsc2VcbiAgICAgIH0pKTtcbiAgICB9LCAwKTtcbiAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCdjdXJyZW50SW5kZXgnLCBjdXJyZW50SW5kZXgpO1xuICB9OyAvL9C/0L7QutCw0LfQsNGC0Ywg0L/QtdGA0LXQvdC+0YHQuNC80YvQuSDRjdC70LXQvNC10L3RglxuXG5cbiAgdmFyIGhhbmRsZURyYWdFbmQgPSBmdW5jdGlvbiBoYW5kbGVEcmFnRW5kKGUpIHtcbiAgICByZXR1cm4gc2V0UG9pbnRTdGF0ZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHBvaW50U3RhdGUpLCB7XG4gICAgICBpc1Zpc2libGU6IHRydWVcbiAgICB9KSk7XG4gIH07IC8v0LLRi9C00LXQu9C40YLRjCDRhtC10LvQtdCy0L7QuSDRjdC70LXQvNC10L3RgiDQv9GA0Lgg0L3QsNCy0LXQtNC10L3QuNC4XG5cblxuICB2YXIgaGFuZGxlRHJhZ092ZXIgPSBmdW5jdGlvbiBoYW5kbGVEcmFnT3ZlcihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmICghcG9pbnRTdGF0ZS5pc0hvdmVyZWQpIHNldFBvaW50U3RhdGUoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwb2ludFN0YXRlKSwge1xuICAgICAgaXNIb3ZlcmVkOiB0cnVlXG4gICAgfSkpO1xuICB9OyAvL9GD0LHRgNCw0YLRjCDQstGL0LTQtdC70LXQvdC40LUg0YEg0YbQtdC70LXQstC+0LPQviDRjdC70LXQvNC10L3RgtCwXG5cblxuICB2YXIgaGFuZGxlRHJhZ0xlYXZlID0gZnVuY3Rpb24gaGFuZGxlRHJhZ0xlYXZlKGUpIHtcbiAgICByZXR1cm4gc2V0UG9pbnRTdGF0ZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHBvaW50U3RhdGUpLCB7XG4gICAgICBpc0hvdmVyZWQ6IGZhbHNlXG4gICAgfSkpO1xuICB9OyAvL9CX0LDQstC10YDRiNC10L3QuNC1INC/0LXRgNC10L3QvtGB0LAsINC+0YLQv9GD0YHRgtC40LvQuCDQutC90L7Qv9C60YMg0LzRi9GI0LhcblxuXG4gIHZhciBoYW5kbGVEcm9wID0gZnVuY3Rpb24gaGFuZGxlRHJvcChlKSB7XG4gICAgdmFyIHRhcmdldEluZGV4ID0gaW5kZXg7IC8v0LjQvdC00LXQutGBINGG0LXQu9C10LLQvtCz0L4g0Y3Qu9C10LzQtdC90YLQsCAo0LfQvdCw0YfQtdC90LjQtSBpbmRleCDQt9Cw0LLQuNGB0LjRgiDQvtGCINCy0YvQt9Cy0LDQvdC+0LPQviDRgdC+0LHRi9GC0LjRjylcblxuICAgIHZhciBjdXJyZW50SW5kZXggPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCdjdXJyZW50SW5kZXgnKTtcbiAgICBzZXRQb2ludFN0YXRlKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcG9pbnRTdGF0ZSksIHtcbiAgICAgIGlzSG92ZXJlZDogZmFsc2VcbiAgICB9KSk7XG4gICAgaGFuZGxlQ2hhbmdlUG9pbnRQb3NpdGlvbihjdXJyZW50SW5kZXgsIHRhcmdldEluZGV4KTtcbiAgfTsgLy9jb25zdCBoYW5kbGVEcmFnRW50ZXIgPSAoZSkgPT4gc2V0UG9pbnRTdGF0ZSh7IC4uLnBvaW50U3RhdGUsIC4uLnsgaXNIb3ZlcmVkOiB0cnVlIH0gfSlcblxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInBvaW50LXdyYXBcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgb25EcmFnU3RhcnQ6IGhhbmRsZURyYWdTdGFydCxcbiAgICBvbkRyYWdFbmQ6IGhhbmRsZURyYWdFbmQsXG4gICAgb25EcmFnT3ZlcjogaGFuZGxlRHJhZ092ZXIgLy9vbkRyYWdFbnRlcj17aGFuZGxlRHJhZ0VudGVyfVxuICAgICxcbiAgICBvbkRyYWdMZWF2ZTogaGFuZGxlRHJhZ0xlYXZlLFxuICAgIG9uRHJvcDogaGFuZGxlRHJvcCxcbiAgICBjbGFzc05hbWU6IFwicG9pbnQgXCIuY29uY2F0KGhvdmVyQ2xhc3MsIFwiIFwiKS5jb25jYXQoaGlkZUNsYXNzKSxcbiAgICBkcmFnZ2FibGU6IFwidHJ1ZVwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIHRpdGxlKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7XG4gICAgaGFuZGxlRGVsZXRlUG9pbnQ6IGhhbmRsZURlbGV0ZVBvaW50XG4gIH0pKSk7XG59OyIsImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHlcIjtcblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGVudW1lcmFibGVPbmx5ICYmIChzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSkpLCBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IG51bGwgIT0gYXJndW1lbnRzW2ldID8gYXJndW1lbnRzW2ldIDoge307IGkgJSAyID8gb3duS2V5cyhPYmplY3Qoc291cmNlKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSkgOiBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuaW1wb3J0IFJlYWN0LCB7IHVzZUNvbnRleHQgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IGN0eCB9IGZyb20gXCIuLi8uLi9zdG9yZVwiO1xuaW1wb3J0IHsgUG9pbnRzSXRlbSB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL3BvaW50c0l0ZW1cIjtcbmV4cG9ydCB2YXIgUG9pbnRzID0gZnVuY3Rpb24gUG9pbnRzKCkge1xuICB2YXIgX3VzZUNvbnRleHQgPSB1c2VDb250ZXh0KGN0eCksXG4gICAgICBzdG9yZSA9IF91c2VDb250ZXh0LnN0b3JlLFxuICAgICAgdXBkU3RvcmUgPSBfdXNlQ29udGV4dC51cGRTdG9yZTtcblxuICB2YXIgX2hhbmRsZURlbGV0ZVBvaW50ID0gZnVuY3Rpb24gaGFuZGxlRGVsZXRlUG9pbnQocG9pbnQpIHtcbiAgICB1cGRTdG9yZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0b3JlKSwge1xuICAgICAgcG9pbnRzQ29sbGVjdGlvbjogc3RvcmUucG9pbnRzQ29sbGVjdGlvbi5yZW1vdmUocG9pbnQpXG4gICAgfSkpO1xuICB9O1xuXG4gIHZhciBoYW5kbGVDaGFuZ2VQb2ludFBvc2l0aW9uID0gZnVuY3Rpb24gaGFuZGxlQ2hhbmdlUG9pbnRQb3NpdGlvbihjdXJyZW50SW5kZXgsIHRhcmdldEluZGV4KSB7XG4gICAgdmFyIGN1cnJlbnRQb2ludCA9IHN0b3JlLnBvaW50c0NvbGxlY3Rpb24uZ2V0KGN1cnJlbnRJbmRleCk7XG4gICAgdXBkU3RvcmUoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0b3JlKSwgc3RvcmUucG9pbnRzQ29sbGVjdGlvbi5yZW1vdmUoY3VycmVudFBvaW50KSksIHN0b3JlLnBvaW50c0NvbGxlY3Rpb24uc3BsaWNlKHRhcmdldEluZGV4LCAwLCBjdXJyZW50UG9pbnQpKSk7XG4gIH07XG5cbiAgdmFyIHJlbmRlclBvaW50c0xpc3QgPSBmdW5jdGlvbiByZW5kZXJQb2ludHNMaXN0KHBvaW50c0NvbGxlY3Rpb24pIHtcbiAgICBpZiAocG9pbnRzQ29sbGVjdGlvbikge1xuICAgICAgcmV0dXJuIHBvaW50c0NvbGxlY3Rpb24udG9BcnJheSgpLm1hcChmdW5jdGlvbiAocG9pbnQsIGkpIHtcbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBvaW50c0l0ZW0sIHtcbiAgICAgICAgICBpbmRleDogaSxcbiAgICAgICAgICBrZXk6IHBvaW50LnByb3BlcnRpZXMuZ2V0KCdpZCcpLFxuICAgICAgICAgIHRpdGxlOiBwb2ludC5wcm9wZXJ0aWVzLmdldCgnYmFsbG9vbkNvbnRlbnQnKSxcbiAgICAgICAgICBoYW5kbGVEZWxldGVQb2ludDogZnVuY3Rpb24gaGFuZGxlRGVsZXRlUG9pbnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gX2hhbmRsZURlbGV0ZVBvaW50KHBvaW50KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGhhbmRsZUNoYW5nZVBvaW50UG9zaXRpb246IGhhbmRsZUNoYW5nZVBvaW50UG9zaXRpb25cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwpO1xuICB9O1xuXG4gIHJldHVybiByZW5kZXJQb2ludHNMaXN0KHN0b3JlLnBvaW50c0NvbGxlY3Rpb24pO1xufTsiLCJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5XCI7XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZUNvbnRleHQgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IGN0eCB9IGZyb20gXCIuLi8uLi9zdG9yZVwiO1xuZXhwb3J0IHZhciBNYXAgPSBmdW5jdGlvbiBNYXAoKSB7XG4gIHZhciBfdXNlQ29udGV4dCA9IHVzZUNvbnRleHQoY3R4KSxcbiAgICAgIHN0b3JlID0gX3VzZUNvbnRleHQuc3RvcmUsXG4gICAgICB1cGRTdG9yZSA9IF91c2VDb250ZXh0LnVwZFN0b3JlO1xuXG4gIHZhciBpbml0TWFwID0gZnVuY3Rpb24gaW5pdE1hcCgpIHtcbiAgICByZXR1cm4gbmV3IHltYXBzLk1hcChcIm1hcFwiLCB7XG4gICAgICBjZW50ZXI6IFs1NS43NiwgMzcuNjRdLFxuICAgICAgem9vbTogN1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBjcmVhdGVQb2x5bGluZSA9IGZ1bmN0aW9uIGNyZWF0ZVBvbHlsaW5lKCkge1xuICAgIHJldHVybiBuZXcgeW1hcHMuR2VvT2JqZWN0KHtcbiAgICAgIGdlb21ldHJ5OiB7XG4gICAgICAgIHR5cGU6IFwiTGluZVN0cmluZ1wiLFxuICAgICAgICBjb29yZGluYXRlczogW11cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBzdHJva2VXaWR0aDogNFxuICAgIH0pO1xuICB9O1xuXG4gIHZhciB0cmFuc2Zvcm1Qb2x5bGluZSA9IGZ1bmN0aW9uIHRyYW5zZm9ybVBvbHlsaW5lKGUpIHtcbiAgICBpZiAoc3RvcmUucG9pbnRzQ29sbGVjdGlvbikge1xuICAgICAgdmFyIGNvb3JkaW5hdGVzID0gc3RvcmUucG9pbnRzQ29sbGVjdGlvbi50b0FycmF5KCkubWFwKGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICByZXR1cm4gcG9pbnQuZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIH0pO1xuICAgICAgc3RvcmUucG9seWxpbmUuZ2VvbWV0cnkuc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgY3JlYXRlUG9pbnRzQ29sbGVjdGlvbiA9IGZ1bmN0aW9uIGNyZWF0ZVBvaW50c0NvbGxlY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyB5bWFwcy5HZW9PYmplY3RDb2xsZWN0aW9uKHt9LCB7XG4gICAgICBwcmVzZXQ6ICdpc2xhbmRzI3JlZEljb24nLFxuICAgICAgZHJhZ2dhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH07XG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICB5bWFwcy5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXN0b3JlLm1hcCkge1xuICAgICAgICB2YXIgbWFwID0gaW5pdE1hcCgpO1xuICAgICAgICB2YXIgcG9pbnRzQ29sbGVjdGlvbiA9IGNyZWF0ZVBvaW50c0NvbGxlY3Rpb24oKTtcbiAgICAgICAgdmFyIHBvbHlsaW5lID0gY3JlYXRlUG9seWxpbmUoKTtcbiAgICAgICAgbWFwLmdlb09iamVjdHMuYWRkKHBvaW50c0NvbGxlY3Rpb24pO1xuICAgICAgICBtYXAuZ2VvT2JqZWN0cy5hZGQocG9seWxpbmUpO1xuICAgICAgICB1cGRTdG9yZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0b3JlKSwge1xuICAgICAgICAgIG1hcDogbWFwLFxuICAgICAgICAgIHBvbHlsaW5lOiBwb2x5bGluZSxcbiAgICAgICAgICBwb2ludHNDb2xsZWN0aW9uOiBwb2ludHNDb2xsZWN0aW9uXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChzdG9yZS5wb2ludHNDb2xsZWN0aW9uKSB7XG4gICAgICB2YXIgdHJhbnNmb3JtUG9seWxpbmVFdmVudCA9IGZ1bmN0aW9uIHRyYW5zZm9ybVBvbHlsaW5lRXZlbnQoZSkge1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtUG9seWxpbmUoZSk7XG4gICAgICB9O1xuXG4gICAgICBzdG9yZS5wb2ludHNDb2xsZWN0aW9uLmV2ZW50cy5hZGQoJ2FkZCcsIHRyYW5zZm9ybVBvbHlsaW5lRXZlbnQpO1xuICAgICAgc3RvcmUucG9pbnRzQ29sbGVjdGlvbi5ldmVudHMuYWRkKCdnZW9tZXRyeWNoYW5nZScsIHRyYW5zZm9ybVBvbHlsaW5lRXZlbnQpO1xuICAgICAgc3RvcmUucG9pbnRzQ29sbGVjdGlvbi5ldmVudHMuYWRkKCdyZW1vdmUnLCB0cmFuc2Zvcm1Qb2x5bGluZUV2ZW50KTsgLy9zdG9yZS5wb2ludHNDb2xsZWN0aW9uLmV2ZW50cy5hZGQoJ3NldCcsIHRyYW5zZm9ybVBvbHlsaW5lRXZlbnQpXG4gICAgICAvL3N0b3JlLnBvaW50c0NvbGxlY3Rpb24uZXZlbnRzLmFkZCgnZHJhZ2VuZCcsIHRyYW5zZm9ybVBvbHlsaW5lRXZlbnQpXG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN0b3JlLnBvaW50c0NvbGxlY3Rpb24uZXZlbnRzLnJlbW92ZSgnYWRkJywgdHJhbnNmb3JtUG9seWxpbmVFdmVudCk7XG4gICAgICAgIHN0b3JlLnBvaW50c0NvbGxlY3Rpb24uZXZlbnRzLnJlbW92ZSgnZ2VvbWV0cnljaGFuZ2UnLCB0cmFuc2Zvcm1Qb2x5bGluZUV2ZW50KTtcbiAgICAgICAgc3RvcmUucG9pbnRzQ29sbGVjdGlvbi5ldmVudHMucmVtb3ZlKCdyZW1vdmUnLCB0cmFuc2Zvcm1Qb2x5bGluZUV2ZW50KTtcbiAgICAgIH07XG4gICAgfVxuICB9LCBbc3RvcmVdKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgaWQ6IFwibWFwXCIsXG4gICAgY2xhc3NOYW1lOiBcIm1hcFwiXG4gIH0pKTtcbn07IiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9pbnB1dFwiO1xuaW1wb3J0IHsgUG9pbnRzIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvcG9pbnRzXCI7XG5pbXBvcnQgeyBNYXAgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9tYXBcIjtcbmV4cG9ydCB2YXIgSW5kZXhQYWdlID0gZnVuY3Rpb24gSW5kZXhQYWdlKCkge1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjb250ZW50XCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjb250ZW50X19pbnB1dFwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KElucHV0LCBudWxsKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjb250ZW50X19wb2ludHNcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQb2ludHMsIG51bGwpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiY29udGVudF9fbWFwXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTWFwLCBudWxsKSkpO1xufTsiLCJpbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgeyBjcmVhdGVSb290IH0gZnJvbSAncmVhY3QtZG9tL2NsaWVudCc7XG5pbXBvcnQgeyBpbml0aWFsU3RhdGUgfSBmcm9tICcuL3N0b3JlJztcbmltcG9ydCB7IGN0eCB9IGZyb20gJy4vc3RvcmUnO1xuaW1wb3J0IHsgSW5kZXhQYWdlIH0gZnJvbSAnLi9wYWdlcy9pbmRleCc7XG5pbXBvcnQgJy4vY3NzL3N0eWxlLnNhc3MnO1xuLyogY29uc29sZS5sb2cocHJvY2Vzcy5lbnYuU1VCX0ZPTERFUikgKi9cblxuLyogY29uc29sZS5sb2cocHJvY2Vzcy5lbnYuQkFDS0VORF9IT1NUKSAqL1xuXG52YXIgQXBwID0gZnVuY3Rpb24gQXBwKCkge1xuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoaW5pdGlhbFN0YXRlKSxcbiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLFxuICAgICAgc3RvcmUgPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgdXBkU3RvcmUgPSBfdXNlU3RhdGUyWzFdO1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChjdHguUHJvdmlkZXIsIHtcbiAgICB2YWx1ZToge1xuICAgICAgc3RvcmU6IHN0b3JlLFxuICAgICAgdXBkU3RvcmU6IHVwZFN0b3JlXG4gICAgfVxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChJbmRleFBhZ2UsIG51bGwpKTtcbn07XG5cbnZhciByb290ID0gY3JlYXRlUm9vdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFwcFwiKSk7XG5yb290LnJlbmRlciggLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQXBwLCBudWxsKSk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///E3jb4rnO\n");

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, [296], () => (__webpack_exec__("E3jb4rnO")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);